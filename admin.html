<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BhA-AI Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f172a;
  color:white;
  font-family:Arial, sans-serif;
  margin:0;
  padding:15px;
}

.admin-box {
  max-width:550px;
  margin:auto;
  background:#1e293b;
  padding:20px;
  border-radius:12px;
}

h2, h3 {
  text-align:center;
}

input, button {
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
  border:none;
  font-size:16px;
}

button {
  background:#22c55e;
  font-weight:bold;
  cursor:pointer;
}

.section {
  margin-top:30px;
  padding-top:15px;
  border-top:1px solid #334155;
}

.item {
  background:#334155;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
}

.item a {
  color:#38bdf8;
  word-break:break-all;
}

.delete-btn {
  background:#ef4444;
  color:white;
  margin-top:6px;
}
</style>
</head>

<body>

<div class="admin-box">
  <h2>ü§ñ BhA-AI Admin Panel</h2>

  <!-- ================= ABOUT MODULE ================= -->
  <div class="section">
    <h3>üè´ About College</h3>

    <input id="aboutTitle" placeholder="Title (Eg: History)">
    <input id="aboutUrl" placeholder="Website URL">
    <button onclick="addAbout()">Add About Info</button>

    <div id="aboutList"></div>
  </div>

  <!-- ================= PROGRAMMES MODULE ================= -->
  <div class="section">
    <h3>üéì Programmes</h3>

    <input id="progName" placeholder="Programme Name (UG,PG,etc)">
    <input id="progUrl" placeholder="Programme Page URL">
    <button onclick="addProgram()">Add Programme</button>

    <div id="programList"></div>
  </div>
</div>

<!-- üîπ Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* üîπ Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyCYJY8PoJSoH_xiyrRHATjj-43j0Q9CrRQ",
  authDomain: "bha-ai-admin.firebaseapp.com",
  projectId: "bha-ai-admin"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* ================= ABOUT ================= */

function addAbout() {
  const title = aboutTitle.value.trim();
  const url = aboutUrl.value.trim();

  if (!title || !url) return alert("Fill all fields");

  db.collection("about").add({ title, url }).then(() => {
    aboutTitle.value = "";
    aboutUrl.value = "";
  });
}

function loadAbout() {
  const list = document.getElementById("aboutList");

  db.collection("about").onSnapshot(snapshot => {
    list.innerHTML = "";
    snapshot.forEach(doc => {
      const d = doc.data();
      list.innerHTML += `
        <div class="item">
          <b>${d.title}</b><br>
          <a href="${d.url}" target="_blank">${d.url}</a>
          <button class="delete-btn" onclick="deleteAbout('${doc.id}')">Delete</button>
        </div>
      `;
    });
  });
}

function deleteAbout(id) {
  db.collection("about").doc(id).delete();
}

/* ================= PROGRAMMES ================= */

function addProgram() {
  const name = progName.value.trim();
  const url = progUrl.value.trim();

  if (!name || !url) return alert("Fill all fields");

  db.collection("programs").add({ name, url }).then(() => {
    progName.value = "";
    progUrl.value = "";
  });
}

function loadPrograms() {
  const list = document.getElementById("programList");

  db.collection("programs").onSnapshot(snapshot => {
    list.innerHTML = "";
    snapshot.forEach(doc => {
      const p = doc.data();
      list.innerHTML += `
        <div class="item">
          üéì <b>${p.name}</b><br>
          <a href="${p.url}" target="_blank">${p.url}</a>
          <button class="delete-btn" onclick="deleteProgram('${doc.id}')">Delete</button>
        </div>
      `;
    });
  });
}

function deleteProgram(id) {
  db.collection("programs").doc(id).delete();
}

/* üîπ INITIAL LOAD */
loadAbout();
loadPrograms();
</script>

</body>
</html>
